pipeline {
	agent any
	environment {
		APP_NAME = "test-module-rest"
		VM_DEV01 = "116.203.2.205:2376"
	}

		stages {
			stage('Remove test-rest from VM-DEV01') {
				steps {
					script {
						docker.withServer("$VM_DEV01", 'vm-dev01-creds') {
							sh 'docker stop $(docker ps -a |grep $APP_NAME|awk \'{print $1;}\')'
							sh 'docker rm $(docker ps -a |grep $APP_NAME|awk \'{print $1;}\')'
							sh 'docker system prune -a -f'
						}
					}
				}
			}

		}
}
